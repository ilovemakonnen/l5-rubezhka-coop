## Правила и регламент

- [Экзамен: правила, рекомендации и порядок проведения](https://hexly.notion.site/d9289c18871c44508bc7c7f05a51d94f)

## Задание

Ваша задача написать валидатор, в котором есть ряд методов и свойств и экспортировать его по умолчанию из файла *index.js*. Валидатор позволяет проверять аргументы на соответствие необходимым условиям, которые были заданы с помощью методов валидатора. Запуск валидатора происходит в конце задачи, с помощью метода `isValid()`.

Пример использования:

```javascript
// создаем экземпляр валидатора
const v = new Validator();
// определяем метод для валидации строк и связываем его с валидатором, обращаясь к нему через переменную.
const schema = v.string();

// проверяем данные на соответствие строковому типу, с помощью метода isValid()
schema.isValid(null); // false
schema.isValid(''); // true
schema.isValid(123); // false
```

### Примечания

Вы можете самостоятельно протестировать работу валидатора. В каталоге *src* разрешено использовать любые файлы, только с расширением **js** и создавать новые, если это делает вашу разработку более удобной.

Для тестирования валидатора, достаточно создать экземпляр валидатора, настроить валидацию с помощью методов и вызвать метод `validate()` с необходимым аргументом, после чего написать в терминале:

```bash
node index.js
```

## 1 задача

Вам необходимо создать валидатор, который способен принимать аргумент и проводить его проверку на соответствие определенным условиям. В данной задаче мы ограничиваемся валидацией только почтовых индексов. Для этого в вашем валидаторе должен быть метод `postalCode()`, который создает экземпляр валидатора почтового индекса. Этот экземпляр обладает методом `isValid()`, который принимает данные на вход и возвращает значение *true* или *false* в зависимости от того, являются ли входные данные почтовым индексом или нет.

**Условия**

- Корректный почтовый индекс начинается со слова "ZIP"

**Методы и аргументы**

- Аргумент, который мы валидируем (проверяем)
- Метод валидатора `postalCode()`, который создает экземпляр валидатора почтового индекса
- Метод `isValid()`, который вызывается у экземпляра `postalCode()`. Он проверяет, является ли входной аргумент корректным почтовым индексом.

```javascript
const v = new Validator();
const postalCodeSchema = v.postalCode();

postalCodeSchema.isValid('ZIP_12345'); // true
postalCodeSchema.isValid('ZIP_67890'); // true
postalCodeSchema.isValid('ZIP_54321'); // true
postalCodeSchema.isValid('invalid-postal-code'); // false
postalCodeSchema.isValid(1234567890); // false
```

После добавления метода `postalCode()`, экземпляр валидатора сможет проверять, является ли входной аргумент корректным почтовым индексом.

## 2 задача

Вам необходимо расширить функциональность экземпляра валидатора почтовых индексов, добавив к нему метод `setPostalCodeLengthConstraint()`. Этот метод принимает один обязательный аргумент - минимальную длину почтового индекса, а также один необязательный аргумент - максимальную длину почтового индекса. При вызове метода `setPostalCodeLengthConstraint()`, он добавляет дополнительную проверку, которая будет выполняться при вызове метода `isValid()`.

Валидируется всё, что находится после слова "ZIP_".

**Методы**

- Метод `setPostalCodeLengthConstraint()`, который вызывается у экземпляра `postalCode()`. Он добавляет еще одну проверку.

```javascript
const v = new Validator();

const postalCodeSchema1 = v.postalCode();
postalCodeSchema1.isValid('ZIP_12345'); // true

const postalCodeSchema2 = v.postalCode().setPostalCodeLengthConstraint(7);
postalCodeSchema2.isValid('ZIP_6789056889'); // true
postalCodeSchema2.isValid('ZIP_54321'); // false

const postalCodeSchema3 = v.postalCode().setPostalCodeLengthConstraint(4, 6);
postalCodeSchema3.isValid('ZIP_54321'); // true
postalCodeSchema3.isValid('ZIP_67'); // false
```

После добавления метода `setPostalCodeLengthConstraint()`, экземпляр валидатора почтовых индексов будет проверять, чтобы входной почтовый индекс начинался с указанного префикса.

## 3 задача

Вам необходимо создать валидатор, который способен принимать аргумент и проводить его проверку на соответствие определенным условиям. В данной задаче мы ограничиваемся валидацией только IP-адресов. Для этого в вашем валидаторе должен быть метод `ipAddress()`, который создает экземпляр валидатора IP-адреса. Этот экземпляр обладает методом `isValid()`, который принимает данные на вход и возвращает значение *true* или *false* в зависимости от того, являются ли входные данные действительным IP-адресом или нет.

**Условия**

- Валидный адрес начинается с числа "27"

**Методы и аргументы**

- Аргумент, который мы валидируем (проверяем)
- Метод валидатора `ipAddress()`, который создает экземпляр валидатора IP-адреса
- Метод `isValid()`, который вызывается у экземпляра `ipAddress()`. Он проверяет, является ли входной аргумент действительным IP-адресом

```javascript
const v = new Validator();
const ipAddressSchema = v.ipAddress();

ipAddressSchema.isValid('27.168.0.1'); // true
ipAddressSchema.isValid('27.0.0.1'); // true
ipAddressSchema.isValid('172.16.0.1'); // false
ipAddressSchema.isValid('8.8.8.8'); // false
ipAddressSchema.isValid('invalid-ip-address'); // false
ipAddressSchema.isValid('256.0.0.1'); // false
```

После добавления метода `ipAddress()`, экземпляр валидатора сможет проверять, является ли входной аргумент действительным IP-адресом.

## 4 задача

Вам необходимо расширить функциональность экземпляра валидатора IP-адресов, добавив к нему метод `ipAddressValues()`. Метод проверяет корректность указанных значений в IPv4 адресе (4 числа от 0 до 255 каждое). При вызове метода `ipAddressValues()`, он добавляет дополнительную проверку, которая будет выполняться при вызове метода `isValid()`.

**Условия**

- Валидируется все после числа *27*


**Методы**

- Метод `ipAddressValues()`, который вызывается у экземпляра `ipAddress()`. Он добавляет еще одну проверку

```javascript
const v = new Validator();

const ipAddressSchema1 = v.ipAddress();
ipAddressSchema1.isValid('27.168.0.1'); // true

const ipAddressSchema2 = v.ipAddress().ipAddressValues();
ipAddressSchema2.isValid('27.0.0.1.4'); // false
ipAddressSchema2.isValid('192.168.0.270'); // false

const ipAddressSchema3 = v.ipAddress().ipAddressValues();
ipAddressSchema3.isValid('27.16.0.55'); // true
ipAddressSchema3.isValid('8.8.8.8'); // false
```

После добавления метода `ipAddressValues()`, экземпляр валидатора IP-адресов будет проверять, чтобы входной IP-адрес начинался с указанного префикса.

## 5 задача

Вам необходимо создать валидатор полей пользователя, используя методы, представленные в предыдущих задачах. Для этого необходимо создать метод `user()`, который проверяет не сам объект, а данные внутри него на соответствие заданным валидаторам. Метод `Validator.user()` должен содержать метод `shape()`, позволяющий задать поля, подлежащие валидации, для пользователя. Метод `shape()` принимает объект, ключи которого представляют поля, требующие проверки, а значения - экземпляры валидаторов.

**Методы**

- Метод валидатора (экземпляр класса *Validator*) `user()`, который проверяет данные внутри объекта (поля объекта)
- Метод `shape()`, который вызывается у экземпляра `user()`. Он позволяет задать поля валидации для объекта

```javascript
const v = new Validator();

// Позволяет описывать валидацию для свойств пользователя
const userSchema = v.user().shape({
  postalCode: v.postalCode().setPostalCodeLengthConstraint(7),
  ipAddress: v.ipAddress().setIpAddressRangeConstraint(4, 6),
});

userSchema.isValid({
  postalCode: 'ZIP_6789056889',
  ipAddress: '27.16.0.55',
}); // true

userSchema.isValid({
  postalCode: '56121',
  ipAddress: '10.0.0.1',
}); // false
```

После добавления методов `user()` и `shape()`, экземпляр валидатора сможет проверять поля пользователя на соответствие заданным валидаторам.
